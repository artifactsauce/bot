#!/usr/bin/env bash

set -eu

# Exit if not declared
DOCKER_USERNAME=${DOCKER_USERNAME:?"[ERROR] Required to declare enviroment variable: DOCKER_USERNAME"}
DOCKER_IMGNAME=${DOCKER_IMGNAME:?"[ERROR] Required to declare enviroment variable: DOCKER_IMGNAME"}

OPTION=""

if [ $# -eq 1 ]; then
  case $1 in
  "clean")
    OPTION="--no-cache"
    ;;
  esac
fi

docker build \
  $OPTION \
  -t ${DOCKER_USERNAME}/${DOCKER_IMGNAME} \
  .
